/**
 * Generate Permission Docs
 *
 * This file formats the response from GET /static/permission to human readable markdown
 *
 * @param {process.argv[2]} Pathname to response JSON file from Devopness API route GET /static/permissions
 */
const staticPermissions = require(process.argv[2])

console.log(`<!--
  NOTE: This file is auto generated using Devopness API Response as input
  Do not edit this file manually
-->
# Permissions`);

for (const resourceType of staticPermissions) {
  console.log(`
## ${resourceType.human_readable}`);

  for (const permission of resourceType.permissions) {
    console.log(`
### ${resourceType.human_readable} ${permission.human_readable}

${permission.hint}

permission: \`${resourceType.resource_type}:${permission.name}\``);
  }
}
